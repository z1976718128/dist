{"version":3,"sources":["webpack:///./src/views/demand/apply.vue?8a3a","webpack:///src/views/demand/apply.vue","webpack:///./src/views/demand/apply.vue?cb1e","webpack:///./src/views/demand/apply.vue","webpack:///./src/views/demand/apply.vue?b57a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","goBack","maxHeight","minHeight","errors","reason","$event","model","value","form","callback","$$v","$set","expression","staticStyle","_v","_s","userInfo","integral","handleSubmit","staticRenderFns","name","components","data","computed","methods","from","$router","back","replace","component"],"mappings":"gJAAA,I,EAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,GAAG,OAAS,GAAG,MAAQ,SAAS,aAAa,IAAIC,GAAG,CAAC,aAAaR,EAAIS,UAAUL,EAAG,iBAAiB,CAACG,MAAM,CAAC,QAAS,IAAQ,CAACH,EAAG,YAAY,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,WAAW,QAAS,EAAM,SAAW,CAAEG,UAAW,IAAKC,UAAW,KAAM,gBAAgBX,EAAIY,OAAOC,OAAO,YAAc,cAAcL,GAAG,CAAC,MAAQ,SAASM,GAAQd,EAAIY,OAAOC,OAAS,KAAKE,MAAM,CAACC,MAAOhB,EAAIiB,KAAW,OAAEC,SAAS,SAAUC,GAAMnB,EAAIoB,KAAKpB,EAAIiB,KAAM,SAAUE,IAAME,WAAW,kBAAkB,GAAGjB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,aAAa,CAACkB,YAAY,CAAC,mBAAmB,mBAAmB,MAAQ,OAAO,OAAS,IAAI,aAAa,QAAQf,MAAM,CAAC,MAAQ,GAAG,OAAS,GAAG,KAAO,UAAU,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,eAAe,UAAU,KAAO,aAAaH,EAAG,OAAO,CAACkB,YAAY,CAAC,YAAY,UAAU,CAACtB,EAAIuB,GAAG,QAAQvB,EAAIwB,GAAGxB,EAAIyB,SAASC,UAAU,OAAOtB,EAAG,OAAO,CAACkB,YAAY,CAAC,YAAY,UAAU,CAACtB,EAAIuB,GAAG,qBAAqB,GAAGnB,EAAG,aAAa,CAACG,MAAM,CAAC,KAAO,QAAQ,OAAS,GAAG,MAAQ,GAAG,KAAO,UAAUC,GAAG,CAAC,MAAQR,EAAI2B,eAAe,CAAC3B,EAAIuB,GAAG,WAAW,IAAI,IACttCK,EAAkB,G,40BC8CtB,OACEC,KAAM,oBACNC,YAAF,sBACA,YADA,yBAEA,YAFA,yBAGA,YAHA,yBAIA,YAJA,yBAKA,YALA,yBAMA,YANA,WAQEC,KAVF,WAWI,MAAO,CACLd,KAAM,CAAZ,WACML,OAAQ,CAAd,aAGEoB,SAAU,EAAZ,GACA,yBADA,GAEA,8BAEEC,QAAS,CAEPxB,OAFJ,WAGUR,KAAKiC,KACPjC,KAAKkC,QAAQC,OAEbnC,KAAKkC,QAAQE,QAAQ,aAGzB,aATJ,qKAUA,iBAVA,uBAWA,8BAXA,+BAcA,0BAdA,uBAeA,aACA,SACA,aACA,gCACA,yBACA,0BAEA,iBACA,+BAEA,kBAEA,gCA3BA,0CAiCA,gBACA,wBACA,yBACA,kCApCA,OAsCA,aACA,OACA,aACA,gCACA,yBAEA,iBACA,cA7CA,0GCnEkc,I,wBCQ9bC,EAAY,eACd,EACAvC,EACA6B,GACA,EACA,KACA,WACA,MAIa,aAAAU,E,6CCnBf,yBAA4sB,EAAG","file":"assets/js/chunk-09610477.4.0.0.1587640598464.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"apply-demand-page\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"border\":\"\",\"title\":\"申请解决需求\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.goBack}}),_c('van-cell-group',{attrs:{\"border\":false}},[_c('van-field',{staticClass:\"textarea\",attrs:{\"type\":\"textarea\",\"border\":false,\"autosize\":{ maxHeight: 180, minHeight: 120 },\"error-message\":_vm.errors.reason,\"placeholder\":\"请输入申请内容...\"},on:{\"input\":function($event){_vm.errors.reason = ''}},model:{value:(_vm.form.reason),callback:function ($$v) {_vm.$set(_vm.form, \"reason\", $$v)},expression:\"form.reason\"}})],1),_c('div',{staticClass:\"bottom-bar\"},[_c('van-button',{staticStyle:{\"background-color\":\"rgba(0,0,0,0.75)\",\"color\":\"#fff\",\"border\":\"0\",\"margin-top\":\"20px\"},attrs:{\"block\":\"\",\"square\":\"\",\"size\":\"large\"}},[_c('van-icon',{attrs:{\"class-prefix\":\"tj-icon\",\"name\":\"xiangmu\"}}),_c('span',{staticStyle:{\"font-size\":\"0.9em\"}},[_vm._v(\"当前积分 \"+_vm._s(_vm.userInfo.integral)+\"。\")]),_c('span',{staticStyle:{\"font-size\":\"0.9em\"}},[_vm._v(\" 申请解决需求将扣除2积分。\")])],1),_c('van-button',{attrs:{\"size\":\"large\",\"square\":\"\",\"block\":\"\",\"type\":\"danger\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"申请解决\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"apply-demand-page\">\r\n    <van-nav-bar\r\n      fixed\r\n      border\r\n      title=\"申请解决需求\"\r\n      left-arrow\r\n      @click-left=\"goBack\"\r\n    />\r\n\r\n    <van-cell-group :border=\"false\">\r\n      <van-field\r\n        class=\"textarea\"\r\n        v-model=\"form.reason\"\r\n        type=\"textarea\"\r\n        :border=\"false\"\r\n        :autosize=\"{ maxHeight: 180, minHeight: 120 }\"\r\n        :error-message=\"errors.reason\"\r\n        @input=\"errors.reason = ''\"\r\n        placeholder=\"请输入申请内容...\"\r\n      />\r\n    </van-cell-group>\r\n\r\n    <div class=\"bottom-bar\">\r\n      <van-button\r\n        block\r\n        square\r\n        size=\"large\"\r\n        style=\"background-color: rgba(0,0,0,0.75); color: #fff; border: 0; margin-top: 20px\"\r\n      >\r\n        <van-icon class-prefix=\"tj-icon\" name=\"xiangmu\" />\r\n        <span style=\"font-size: 0.9em;\"\r\n          >当前积分 {{ userInfo.integral }}。</span\r\n        >\r\n        <span style=\"font-size: 0.9em;\"> 申请解决需求将扣除2积分。</span>\r\n      </van-button>\r\n      <van-button @click=\"handleSubmit\" size=\"large\" square block type=\"danger\"\r\n        >申请解决</van-button\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapState } from \"vuex\";\r\nimport { Button, NavBar, CellGroup, Cell, Icon, Field } from \"vant\";\r\nimport { addDemandRecord } from \"../../api/demand\";\r\n\r\nexport default {\r\n  name: \"add-demand-record\",\r\n  components: {\r\n    [NavBar.name]: NavBar,\r\n    [Button.name]: Button,\r\n    [CellGroup.name]: CellGroup,\r\n    [Cell.name]: Cell,\r\n    [Icon.name]: Icon,\r\n    [Field.name]: Field\r\n  },\r\n  data() {\r\n    return {\r\n      form: { reason: \"\" },\r\n      errors: { reason: \"\" }\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"from\"]),\r\n    ...mapGetters([\"userInfo\"])\r\n  },\r\n  methods: {\r\n    // 点击返回按钮\r\n    goBack() {\r\n      if (this.from) {\r\n        this.$router.back();\r\n      } else {\r\n        this.$router.replace(\"/demands\");\r\n      }\r\n    },\r\n    async handleSubmit() {\r\n      if (!this.form.reason) {\r\n        this.errors.reason = \"申请理由不得为空\";\r\n        return;\r\n      }\r\n      if (this.userInfo.integral < 2) {\r\n        this.$dialog\r\n          .confirm({\r\n            title: \"温馨提示\",\r\n            message: \"当前积分不足，无法申请解决，请充值后再申请\",\r\n            confirmButtonText: \"马上充值\",\r\n            cancelButtonText: \"稍后再说\"\r\n          })\r\n          .then(() => {\r\n            this.$router.push(\"/incharge\");\r\n          })\r\n          .catch(() => {\r\n            // on cancel\r\n            console.log(\"cancel dialog\");\r\n          });\r\n\r\n        return;\r\n      }\r\n\r\n      await addDemandRecord({\r\n        reason: this.form.reason,\r\n        user_id: this.userInfo.id,\r\n        demand_id: this.$route.params.id\r\n      });\r\n      this.$dialog\r\n        .alert({\r\n          title: \"温馨提示\",\r\n          message: \"申请成功，扣除2积分 请耐心等待需求方通过\",\r\n          confirmButtonText: \"确认\"\r\n        })\r\n        .then(() => {\r\n          this.goBack();\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.feedback-page {\r\n  background-color: #fff;\r\n}\r\n\r\n.cell-group {\r\n  margin-top: 12px;\r\n}\r\n\r\n.textarea {\r\n  padding-top: 12px;\r\n}\r\n\r\n.apply-demand-page {\r\n  padding-bottom: 90px;\r\n}\r\n\r\n.bottom-bar {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n}\r\n\r\n@media (min-width: 750px) {\r\n  .cell-group {\r\n    margin-top: 12px;\r\n  }\r\n\r\n  .textarea {\r\n    padding-top: 12px;\r\n  }\r\n\r\n  .apply-demand-page {\r\n    padding-bottom: 90px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js??vue-loader-options!./apply.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js??vue-loader-options!./apply.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./apply.vue?vue&type=template&id=b3ac3364&scoped=true&\"\nimport script from \"./apply.vue?vue&type=script&lang=js&\"\nexport * from \"./apply.vue?vue&type=script&lang=js&\"\nimport style0 from \"./apply.vue?vue&type=style&index=0&id=b3ac3364&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b3ac3364\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js??vue-loader-options!./apply.vue?vue&type=style&index=0&id=b3ac3364&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js??vue-loader-options!./apply.vue?vue&type=style&index=0&id=b3ac3364&lang=less&scoped=true&\""],"sourceRoot":""}