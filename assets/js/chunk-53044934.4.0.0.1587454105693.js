(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53044934"],{"7ae4":function(e,t,a){"use strict";var n=a("a03d"),r=a.n(n);r.a},"95cc":function(e,t,a){"use strict";a.r(t);var n,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-nav-bar",{attrs:{fixed:"",border:"",title:"公司入驻","left-arrow":""},on:{"click-left":e.goBack}}),a("van-cell-group",{staticClass:"bottm"},[a("van-field",{attrs:{required:"",label:"logo",readonly:""},scopedSlots:e._u([{key:"button",fn:function(){return[a("van-uploader",{attrs:{"after-read":e.uploadLogo,accept:"image/*"}},[e.tled.logo?a("img",{staticClass:"uploaded-img",attrs:{src:e.tled.logo,alt:""}}):a("van-button",{staticClass:"btnColor",attrs:{size:"small",type:"danger"}},[e._v("上传图片")])],1)]},proxy:!0}])}),a("van-field",{staticClass:"companyName",attrs:{required:"",clearable:"","input-align":"right",label:"公司全称",placeholder:"请输入公司全称"},on:{input:e.ChangVal},model:{value:e.tled.companyName,callback:function(t){e.$set(e.tled,"companyName",t)},expression:"tled.companyName"}}),a("van-field",{attrs:{required:"",clearable:"",readonly:"","input-align":"right",label:"公司税号",placeholder:"请输入公司税号"},model:{value:e.tled.creditCode,callback:function(t){e.$set(e.tled,"creditCode",t)},expression:"tled.creditCode"}}),a("van-field",{attrs:{required:"","is-link":"",readonly:"",label:"公司行业",placeholder:"请输入公司行业","input-align":"right","error-message-align":"right"},on:{click:e.showIndustryPopup},model:{value:e.selectedIndustry,callback:function(t){e.selectedIndustry=t},expression:"selectedIndustry"}}),a("van-cell",{attrs:{required:"",title:"主营业务/公司产品介绍",border:!1}}),a("van-field",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"公司主营业务"},model:{value:e.tled.business,callback:function(t){e.$set(e.tled,"business",t)},expression:"tled.business"}}),a("van-cell",{attrs:{required:"",title:"公司地址",border:!1}}),a("van-field",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"公司地址"},model:{value:e.tled.address,callback:function(t){e.$set(e.tled,"address",t)},expression:"tled.address"}}),a("van-cell",{attrs:{required:"",title:"公司简介",border:!1}}),a("van-field",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"公司简介"},model:{value:e.tled.brief,callback:function(t){e.$set(e.tled,"brief",t)},expression:"tled.brief"}}),a("van-cell",{attrs:{title:"公司图片或产品图片",border:!1}}),a("van-uploader",{staticClass:"lf",attrs:{"max-count":4,"after-read":e.uploadProduct,accept:"image/*"},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}}),a("van-field",{attrs:{required:"",clearable:"","input-align":"right",label:"联系人",placeholder:"请输入联系人"}}),a("van-field",{attrs:{required:"",clearable:"","input-align":"right",label:"联系电话",placeholder:"请输入联系电话"}}),a("van-field",{attrs:{required:"",label:"入驻协议",readonly:""},scopedSlots:e._u([{key:"button",fn:function(){return[a("van-uploader",{attrs:{"after-read":e.uploadFile}},[a("van-button",{staticClass:"btnColor",attrs:{size:"small",type:"danger"}},[e._v("上传入驻协议")])],1)]},proxy:!0}])})],1),a("van-row",{directives:[{name:"show",rawName:"v-show",value:e.showSettled,expression:"showSettled"}],staticClass:"list",attrs:{type:"flex",justify:"center"}},[a("van-col",{attrs:{span:"24"}},e._l(e.EnterpriseInfo,(function(t,n){return a("div",{key:n,staticClass:"items",on:{click:function(t){return e.chVal(n)}}},[a("p",[e._v("名称:"+e._s(t.companyName))]),a("p",[e._v("税号:"+e._s(t.creditCode))])])})),0)],1),a("van-row",{attrs:{type:"flex",justify:"space-between"}},[a("van-col",{attrs:{span:"12"}},[a("van-button",{attrs:{to:"/suppliers",type:"default",size:"large",block:""}},[e._v("取消")])],1),a("van-col",{attrs:{span:"12"}},[a("van-button",{staticClass:"btnColor",attrs:{type:"danger",size:"large",block:""},on:{click:e.save}},[e._v("保存")])],1)],1),a("industry-popup",{ref:"industryPopup",attrs:{value:e.selectedIndustry},on:{confirm:e.selectIndustry,clear:e.clearIndustry}})],1)},s=[],l=(a("419a"),a("e980")),i=(a("f548"),a("ac9f")),o=(a("895c"),a("a66e")),c=(a("b38b"),a("20fb")),d=(a("08e5"),a("2fab")),u=(a("10c2"),a("e3b4")),p=(a("9c0f"),a("a9f0")),f=(a("bc44"),a("6628")),b=(a("b587"),a("e513")),m=(a("1fac"),a("36bd")),h=(a("03fd"),a("7c28")),g=(a("9cf9"),a("fad3")),v=(a("7ea6"),a("45ba")),y=(a("9d47"),a("bb63")),k=(a("cc57"),a("be9b"),a("db43")),j=a("f753"),w=a.n(j),x=a("bee3"),O=a("fa8b"),I=a("5aa3"),C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-uploader",{attrs:{multiple:"","max-count":2,"after-read":e.uploadProduct,accept:"image/*"},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})},$=[],_={components:Object(i["a"])({},m["a"].name,m["a"]),data:function(){return{fileList:[]}},methods:{uploadProduct:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.file,n=new FormData,n.append("image",a),r=this.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"上传中"}),e.prev=4,e.next=7,Object(x["n"])(n);case 7:s=e.sent,r.clear(),l=s.url,console.log(l),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](4),r.clear(),this.$toast.fail(e.t0.message);case 17:case"end":return e.stop()}}),e,this,[[4,13]])})));function t(t){return e.apply(this,arguments)}return t}()}},q=_,N=a("623f"),S=Object(N["a"])(q,C,$,!1,null,null,null),P=S.exports;function E(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return function(n){var r=this;clearTimeout(t),t=setTimeout((function(){e.call(r,n)}),a)}}var L={components:(n={},Object(i["a"])(n,k["a"].name,k["a"]),Object(i["a"])(n,y["a"].name,y["a"]),Object(i["a"])(n,v["a"].name,v["a"]),Object(i["a"])(n,g["a"].name,g["a"]),Object(i["a"])(n,h["a"].name,h["a"]),Object(i["a"])(n,m["a"].name,m["a"]),Object(i["a"])(n,b["a"].name,b["a"]),Object(i["a"])(n,f["a"].name,f["a"]),Object(i["a"])(n,p["a"].name,p["a"]),Object(i["a"])(n,u["a"].name,u["a"]),Object(i["a"])(n,d["a"].name,d["a"]),Object(i["a"])(n,c["a"].name,c["a"]),Object(i["a"])(n,o["a"].name,o["a"]),Object(i["a"])(n,"uploadImg",P),Object(i["a"])(n,"IndustryPopup",I["a"]),n),data:function(){return{showSettled:!1,value:"",visible:!1,columns:[],EnterpriseInfo:[],fileList:[],selectedIndustryObj:[],tled:{companyName:"",creditCode:"",business:"",address:"",brief:"",productImg:[],logo:""}}},created:function(){var e="http://api.qianzhan.com/OpenPlatformService/GetToken";w.a.get(e,{params:{type:"json",appkey:"0a0e7a4ea774bab7",seckey:"942959a69431b1ad"}}).then((function(e){sessionStorage.setItem("qzToken",e.data.result.token)}))},methods:{goBack:function(){this.from?this.$router.back():this.$router.replace("/demands")},showIndustryPopup:function(){this.$refs["industryPopup"].show()},selectIndustry:function(e){this.selectedIndustryObj=e},clearIndustry:function(){this.selectedIndustryObj=[]},changs:E((function(e){this.ChangVal()})),ChangVal:function(){var e=this;if(""!=this.tled.companyName){var t="http://api.qianzhan.com/OpenPlatformService/OrgCompanyQuery";w.a.get(t,{params:{type:"json",token:sessionStorage.getItem("qzToken"),companyName:this.tled.companyName,page:1,pagesize:5,querySet:1}}).then((function(t){console.log(t),e.EnterpriseInfo=t.data.result,e.EnterpriseInfo.length>0&&(e.showSettled=!0)}))}},chVal:function(e){this.tled.creditCode=this.EnterpriseInfo[e].creditCode,this.tled.companyName=this.EnterpriseInfo[e].companyName,this.tled.address=this.EnterpriseInfo[e].address,this.tled.business=this.EnterpriseInfo[e].bussinessDes,this.showSettled=!1},uploadFile:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.file,n=new FormData,n.append("file",a),r=this.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"上传中"}),e.prev=4,e.next=7,Object(x["n"])(n);case 7:e.sent,r.clear(),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](4),r.clear(),this.$toast.fail(e.t0.message);case 15:case"end":return e.stop()}}),e,this,[[4,11]])})));function t(t){return e.apply(this,arguments)}return t}(),uploadProduct:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.file,n=new FormData,n.append("image",a),r=this.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"上传中"}),e.prev=4,e.next=7,Object(x["n"])(n);case 7:s=e.sent,r.clear(),this.tled.productImg.push(s.url),console.log(this.tled.productImg),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](4),r.clear(),this.$toast.fail(e.t0.message);case 17:case"end":return e.stop()}}),e,this,[[4,13]])})));function t(t){return e.apply(this,arguments)}return t}(),uploadLogo:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.file,n=new FormData,n.append("image",a),r=this.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"上传中"}),e.prev=4,e.next=7,Object(x["n"])(n);case 7:s=e.sent,r.clear(),this.tled.logo=s.url,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](4),r.clear(),this.$toast.fail(e.t0.message);case 16:case"end":return e.stop()}}),e,this,[[4,12]])})));function t(t){return e.apply(this,arguments)}return t}(),save:function(){Object(O["e"])({logo:this.tled.logo,company_name:this.tled.companyName,duty_paragrap:this.tled.creditCode,business:this.tled.business.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;"),address:this.tled.address.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;"),detail:this.tled.brief.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;"),img:this.tled.productImg}).then((function(e){console.log(e)}))}},computed:{selectedIndustry:function(){return this.selectedIndustryObj.length>1?this.selectedIndustryObj.map((function(e){return e.name})).join("/"):""}}},z=L,T=(a("7ae4"),Object(N["a"])(z,r,s,!1,null,"b1e13aa0",null));t["default"]=T.exports},a03d:function(e,t,a){}}]);
//# sourceMappingURL=chunk-53044934.4.0.0.1587454105693.js.map